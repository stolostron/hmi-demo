---
# tasks file for kiosk_mode
- name: oasis_roles.system.rhsm
  ansible.builtin.import_role:
    name: oasis_roles.system.rhsm

- name: install firefox
  ansible.builtin.package:
    name: 
    - firefox
    - "@^gnome-desktop-environment"
    state: latest

- name: create systemd service for firefox
  ansible.builtin.template:
    src: firefox.service
    dest: /etc/systemd/system/firefox.service
    mode: 0644

- name: Create gdm configuration for kiosk kiosk_mode
  ansible.builtin.template:
    src: custom.conf
    dest: /etc/gdm/custom.conf
    mode: 0644

- name: Add the user 'kiosk' 
  ansible.builtin.user:
    name: kiosk
    comment: kiosk user

- name: configure session for kiosk username /var/lib/AccountsService/users/kiosk
  ansible.builtin.template:
    src: kiosk.conf
    dest: /var/lib/AccountsService/users/kiosk
    mode: 0644
  